<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Soufiane Shop</title>
<style>
:root{--main:#111;--accent:#25D366;--bg:#f4f4f4}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Tahoma,Arial;background:var(--bg)}
header{background:var(--main);color:#fff;padding:15px;display:flex;justify-content:space-between;align-items:center}
button{cursor:pointer}
.cart{background:var(--accent);padding:8px 14px;border-radius:20px}
.filters,.admin{padding:12px;display:flex;gap:10px;flex-wrap:wrap}
.filters button{background:#ddd;border:none;padding:6px}
.filters input{padding:6px}
.container{padding:15px;display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:15px}
.card{background:#fff;border-radius:10px;box-shadow:0 5px 10px rgba(0,0,0,.1)}
.card img{width:100%;height:170px;object-fit:cover}
.info{padding:10px}
.price{color:green;font-weight:bold;margin:6px 0}
.card button{background:var(--accent);color:#fff;border:none;padding:8px;width:100%;border-radius:5px}
#cartBox,#adminBox{position:fixed;top:0;left:-100%;width:300px;height:100%;background:#fff;padding:12px;transition:.4s;z-index:10}
.cartItem{display:flex;justify-content:space-between;margin-bottom:6px}
input,select{padding:6px;width:100%}
hr{margin:8px 0}
</style>
</head>
<body>

<header>
  <h2>Soufiane Shop</h2>
  <div>
    <button onclick="toggleAdmin()">âš™ï¸ Admin</button>
    <span class="cart" onclick="toggleCart()">ğŸ›’ <span id="count">0</span></span>
  </div>
</header>

<div class="filters">
  <button onclick="filterCat('all')">Ø§Ù„ÙƒÙ„</button>
  <button onclick="filterCat('Ù…Ù„Ø§Ø¨Ø³')">Ù…Ù„Ø§Ø¨Ø³</button>
  <button onclick="filterCat('Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª')">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</button>
  <button onclick="filterCat('Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª')">Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª</button>
  <input placeholder="ğŸ” Ø¨Ø­Ø«..." onkeyup="search(this.value)">
</div>

<div class="container" id="products"></div>

<!-- PANIER -->
<div id="cartBox">
  <button onclick="toggleCart()">âŒ</button>
  <h3>Ø§Ù„Ø³Ù„Ø©</h3>
  <div id="items"></div>
  <b>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: <span id="total">0</span> DH</b>
  <hr>
  <b>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</b><br>
  <label><input type="radio" name="pay" value="cod" checked> Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</label><br>
  <label><input type="radio" name="pay" value="online"> Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
  <button onclick="order()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>
</div>

<!-- ADMIN -->
<div id="adminBox">
  <button onclick="toggleAdmin()">âŒ</button>
  <h3>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h3>
  <input id="pname" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
  <input id="pprice" type="number" placeholder="Ø§Ù„Ø«Ù…Ù†">
  <input id="pimg" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
  <select id="pcat">
    <option>Ù…Ù„Ø§Ø¨Ø³</option>
    <option>Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</option>
    <option>Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª</option>
  </select>
  <button onclick="addProduct()">â• Ø¥Ø¶Ø§ÙØ©</button>
</div>

<script>
let products = JSON.parse(localStorage.getItem("products")) || [];
let cart=[], total=0;

function save(){localStorage.setItem("products",JSON.stringify(products))}
function renderProducts(list=products){
  let c=document.getElementById("products"); c.innerHTML="";
  list.forEach(p=>{
    c.innerHTML+=`
    <div class="card" data-cat="${p.cat}">
      <img src="${p.img}">
      <div class="info">
        <h4 class="name">${p.name}</h4>
        <div class="price">${p.price} DH</div>
        <button onclick="addToCart('${p.name}',${p.price})">Ø£Ø¶Ù</button>
      </div>
    </div>`;
  });
}
renderProducts();

function addProduct(){
  if(!pname.value||!pprice.value||!pimg.value) return alert("ÙƒÙ…Ù‘Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª");
  products.push({name:pname.value,price:+pprice.value,img:pimg.value,cat:pcat.value});
  save(); renderProducts();
  pname.value=pprice.value=pimg.value="";
}

function addToCart(n,p){
  cart.push({n,p}); total+=p;
  count.innerText=cart.length;
  items.innerHTML+=`<div class="cartItem"><span>${n}</span><span>${p} DH</span></div>`;
  totalSpan.innerText=total;
}

function toggleCart(){cartBox.style.left = cartBox.style.left=="0px"?"-100%":"0px"}
function toggleAdmin(){adminBox.style.left = adminBox.style.left=="0px"?"-100%":"0px"}

function order(){
  let pay=document.querySelector('input[name="pay"]:checked').value;
  let msg="Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:\n";
  cart.forEach(x=>msg+=`- ${x.n} (${x.p} DH)\n`);
  msg+=`Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${total} DH\nØ·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: ${pay=='cod'?'Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…':'Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ'}`;
  window.open("https://wa.me/212674412120?text="+encodeURIComponent(msg));
}

function filterCat(cat){
  renderProducts(cat=="all"?products:products.filter(p=>p.cat==cat));
}
function search(t){
  t=t.toLowerCase();
  renderProducts(products.filter(p=>p.name.toLowerCase().includes(t)));
}
</script>
</body>
</html>
